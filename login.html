<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Makkos Liga – Admin belépés</title>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    :root{
      --bg:#0b0b0d;
      --panel:#111114;
      --panel2:#15151a;
      --text:#ffffff;
      --muted:#b3b3b3;
      --line: rgba(255,255,255,0.08);
      --red:#c4161c;
      --shadow: 0 14px 40px rgba(0,0,0,.65);
      --radius:14px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:var(--bg);
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    .login-card{
      width:100%;
      max-width:380px;
      background:linear-gradient(180deg,var(--panel2),var(--panel));
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:26px 22px 24px;
    }

    .logo{
      display:flex;
      justify-content:center;
      margin-bottom:18px;
    }

    .logo img{
      height:75px;
      object-fit:contain;
    }

    h2{
      margin:0 0 6px;
      text-align:center;
      font-size:20px;
      letter-spacing:.3px;
    }

    .subtitle{
      text-align:center;
      font-size:13px;
      color:var(--muted);
      margin-bottom:20px;
    }

    .field{
      margin-bottom:14px;
    }

    .field input{
      width:100%;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid var(--line);
      background:#000;
      color:#fff;
      font-size:14px;
    }

    .field input::placeholder{
      color:var(--muted);
    }

    .field input:focus{
      outline:none;
      border-color:var(--red);
    }

    button{
      width:100%;
      padding:12px;
      border-radius:12px;
      border:1px solid var(--red);
      background:linear-gradient(180deg, rgba(196,22,28,.35), rgba(196,22,28,.15));
      color:#fff;
      font-size:15px;
      font-weight:700;
      cursor:pointer;
    }

    button:hover{
      background:rgba(196,22,28,.35);
    }

    #msg{
      margin-top:14px;
      font-size:13px;
      text-align:center;
      color:var(--muted);
      min-height:18px;
    }

    .back{
      margin-top:18px;
      text-align:center;
      font-size:13px;
    }

    .back a{
      color:var(--muted);
      text-decoration:none;
    }

    .back a:hover{
      color:#fff;
      text-decoration:underline;
    }
  </style>
</head>

<body>

  <div class="login-card">

    <div class="logo">
      <img src="assets/logo2.png" alt="Makkos Liga">
    </div>

    <h2>Admin belépés</h2>
    <div class="subtitle">Makkos Liga – kezelőfelület</div>

    <div class="field">
      <input id="email" type="email" placeholder="Email">
    </div>

    <div class="field">
      <input id="password" type="password" placeholder="Jelszó">
    </div>

    <button id="loginBtn">Bejelentkezés</button>

    <p id="msg"></p>

    <div class="back">
      <a href="index.html">← Vissza a tabellához</a>
    </div>

  </div>

<script>
  const supabaseUrl = "https://kqtzyhmksnjowielrwii.supabase.co";
  const supabaseKey = "sb_publishable_vgSmqItheOG3aeOdoNionA_rd-4MTL2";

  const supabaseClient = supabase.createClient(
    supabaseUrl,
    supabaseKey
  );

  document.getElementById("loginBtn").addEventListener("click", login);

  async function login() {
    const msg = document.getElementById("msg");
    msg.textContent = "Belépés folyamatban…";

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    const { error } = await supabaseClient.auth.signInWithPassword({
      email,
      password
    });

    if (error) {
      msg.textContent = error.message;
      console.error(error);
    } else {
      msg.textContent = "✅ Sikeres belépés";
      window.location.href = "admin.html";
    }
  }
</script>

</body>
</html>
